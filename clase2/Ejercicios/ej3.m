pkg load statistics% vector de precios diarios por un aÃ±odatos = csvread("AMZN.csv");% me creo un vector de medias muestrales filtradas por x diasx_filtro = 30;h_filtro = (1/x_filtro)*ones(x_filtro,1);% columna 5 es precio de cierreprecios = datos(:,5);% la primera columna no contiene datosprecios = precios(2:end);% me fijo el precio de compra, ultima muestra del vector originalprecio_compra = precios(length(precios));% precios promedio semanalesprecios_filt = filter(h_filtro,1,precios);% elimino las primeras muestras que tienen retraso del filtroprecios_filt = precios_filt(x_filtro:end);% ganancia esperada en la ventag = 0.02;% significancia del ensayoalpha = 0.05;n = length(precios_filt);% ordeno el vectorprecios_ord = sort(precios_filt);% Q1Q1 = precios_ord(round(0.25*n)) ;% Q3Q3 = precios_ord(round(0.75*n)) ;% IQRIQR = Q3-Q1;% pasopaso = 1.5*IQR;% outlier inferioroutlier_inf = Q1 - paso;% outlier superioroutlier_sup= Q3 + paso;% elimino los outliers (atencion que los datos pueden NO tener outliers)precios_ord_rec = precios_ord(precios_ord>outlier_inf & precios_ord<outlier_sup);% numero de puntos recortadosn_rec = length(precios_ord_rec);% calculo el rango, el precio filtrado sigue distribucion approx. normalrango = precios_ord_rec(n_rec) - precios_ord_rec(1);% estimo el desvio estandar muestral de la poblacions = rango / 4;% precio hipotesisprecio_hipotesis= precio_compra * (1+g);% situo una hipotesis nula en el precio de compra, y testeo la media recortada en base media_muestral_rec = mean(precios_ord_rec);% media muestral (datos)media_muestral_rec% busco el cuantil de la t de Student para la significancia del ensayot_0 = tinv(1-alpha, n_rec-1);% hago un test de hipotesis unilateral de 95% de confianza (alfa=0.05), asumiendo normalidadvalor_minimo_H0 = precio_hipotesis - t_0*s/sqrt(n_rec)% si la estadistica del test me da que es posible tener H0 con la media muestral, entonces compro las acciones, si no no comproif (media_muestral_rec > valor_minimo_H0)  disp('comprar las acciones') else disp('No comprar las acciones') end